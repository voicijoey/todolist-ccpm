<!DOCTYPE html>
<html>
<head>
    <meta charset="utf-8">
    <title>Daily Task Digest</title>
    <style>
        body { font-family: Arial, sans-serif; line-height: 1.6; color: #333; }
        .container { max-width: 600px; margin: 0 auto; padding: 20px; }
        .header { background-color: #28a745; color: white; padding: 20px; text-align: center; }
        .content { padding: 20px; }
        .section { margin: 20px 0; }
        .task-list { list-style: none; padding: 0; }
        .task-item { border-left: 4px solid #007bff; padding: 10px; margin: 10px 0; background-color: #f8f9fa; }
        .overdue-item { border-left-color: #dc3545; }
        .due-soon-item { border-left-color: #ffc107; }
        .stats { display: flex; justify-content: space-around; background-color: #f8f9fa; padding: 15px; }
        .stat { text-align: center; }
        .footer { background-color: #f8f9fa; padding: 15px; text-align: center; font-size: 12px; }
    </style>
</head>
<body>
    <div class="container">
        <div class="header">
            <h1>üìä Daily Task Digest</h1>
            <p>{{date}}</p>
        </div>
        <div class="content">
            <p>Hello {{user.first_name}},</p>
            <p>Here's your daily task summary:</p>

            <div class="stats">
                <div class="stat">
                    <h3>{{stats.total}}</h3>
                    <p>Total Tasks</p>
                </div>
                <div class="stat">
                    <h3>{{stats.completed}}</h3>
                    <p>Completed</p>
                </div>
                <div class="stat">
                    <h3>{{stats.overdue}}</h3>
                    <p>Overdue</p>
                </div>
                <div class="stat">
                    <h3>{{stats.due_soon}}</h3>
                    <p>Due Soon</p>
                </div>
            </div>

            {{#if overdue_tasks}}
            <div class="section">
                <h3>‚ö†Ô∏è Overdue Tasks</h3>
                <ul class="task-list">
                    {{#each overdue_tasks}}
                    <li class="task-item overdue-item">
                        <strong>{{title}}</strong><br>
                        Due: {{due_date}}<br>
                        Priority: {{priority_text}}
                    </li>
                    {{/each}}
                </ul>
            </div>
            {{/if}}

            {{#if due_soon_tasks}}
            <div class="section">
                <h3>üìÖ Due Soon</h3>
                <ul class="task-list">
                    {{#each due_soon_tasks}}
                    <li class="task-item due-soon-item">
                        <strong>{{title}}</strong><br>
                        Due: {{due_date}}<br>
                        Priority: {{priority_text}}
                    </li>
                    {{/each}}
                </ul>
            </div>
            {{/if}}

            <p>Keep up the great work!</p>
        </div>
        <div class="footer">
            <p>This is your daily digest from your Todo List application.</p>
        </div>
    </div>
</body>
</html>